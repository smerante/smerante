$sm-dp: sm-date-picker !default;

.#{$sm-dp} {
  display: inline-block;
  position: relative;
  width: 100%;

  &.ng-invalid.ng-dirty .#{$sm-dp}-input .sm-dp-input-btn,
  &.ng-invalid.ng-dirty .#{$sm-dp}-input .sm-input {
    border-color: color(red);
    border-width: 1px;
  }

  &.ng-invalid.ng-dirty .#{$sm-dp}-input .sm-dp-input-btn:focus,
  &.ng-invalid.ng-dirty .#{$sm-dp}-input .sm-input:focus {
    border: border(sm);
    border-color: color(red);
  }

  @media screen and (max-width: 578px) {
    &__overlay {
      position: fixed;
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
      z-index: 9999999999999998;
      background-color: color(overlay);
    }

    &-open {
      overflow: hidden;
    }
  }

  &-clear {
    display: block;
    text-align: center;
    padding: sp(xxs) sp(xs);
    @include text(body);
    border-top: border(sm) color(border-light);
  }

  &-clear-btn {
    @include text(body);
    color: color(primary);
    margin: 0;
    padding: 0;
    border: 0;
    background: transparent;
    cursor: pointer;
  }
}

.#{$sm-dp}-input {
  display: block;
  position: relative;

  .sm-input {
    width: calc(100% - 74px);
    border-right: 0px;
    min-width: unset;
    display: inline-block;
    border: border(sm) color(border-light);
    padding: 7px 12px;

    &:focus {
      border: border(sm);
      border-color: color(primary);
      border-right-width: 1px;
    }

    &--error {
      border-width: 1px;
    }

    &--error:focus {
      border: border(sm);
      border-color: color(red);
      border-right-width: 1px;
    }
  }

  .sm-dp-input-btn {
    color: color(primary);
    background: color(background);
    @include text(body);

    width: 48px;
    height: 48px;
    padding: sp(z);
    overflow: visible;
    border: border(sm);
    border-color: color(primary);
    padding: sp(sm);

    position: relative;
    cursor: pointer;
    display: block;
    float: right;

    .sm-icon {
      vertical-align: text-top;
    }

    &:active,
    &:hover {
      outline: none;
      border-color: color(primary-hover);
    }

    &:focus {
      outline: none;
      border: border(sm);
      border-color: color(primary);
    }

    &[disabled] {
      background-color: color(disabled);
      color: color(text-disabled);
      border-color: color(text-disabled);
      cursor: not-allowed;
    }

    &--error {
      border-color: color(red);
      border-width: 1px;
    }

    &--error:focus {
      border: border(sm);
      border-color: color(red);
    }
  }
}

.#{$sm-dp}-calendar {
  @media screen and (max-width: 578px) {
    position: fixed;
    top: calc(50vh - 171px);
    left: calc(50vw - 153px);
  }

  width: 304px;
  right: 0px;

  border: border(sm) color(border-light);
  background-color: color(background-light);
  border-color: color(border);

  display: block;
  position: absolute;
  box-sizing: content-box;
  z-index: 9999999999999999;

  &.hidden {
    display: none;
  }
}

.#{$sm-dp}-calendar-nav {
  height: 112px;

  background-color: color(primary-light);

  display: block;
  position: relative;

  &--year-view {
    height: 72px;
  }

  .calendar-nav-date {
    top: 24px;
    position: absolute;
    display: inline-block;
    width: 100%;
    z-index: 0;

    &--view-links {
      display: block;
      position: relative;
      text-align: center;
    }

    .calendar-nav-date-link {
      padding: sp(z) sp(xxxs) sp(z) sp(z);
      margin: sp(z);
      min-width: sp(z);

      @include text(body);
      color: color(text);
      font-weight: 500;
      border: sp(z);
      background: transparent;
      display: inline-block;
      padding: 0 sp(xs);
    }

    .calendar-nav-date-link:focus {
      border: sp(z);
      outline: none;
    }

    .calendar-nav-date-link[activeView="false"] {
      cursor: pointer;
      color: color(primary);
    }

    .calendar-nav-date-link[activeView="false"]:focus {
      outline: none;
      background: transparent;
      color: color(primary-hover);
      text-decoration: underline;
    }

    .calendar-nav-date-link[activeView="false"]:hover {
      text-decoration: underline;
    }
  }

  .calendar-nav-arrows-left,
  .calendar-nav-arrows-right {
    position: absolute;
    display: inline-block;

    top: 20px;
    margin: sp(z) sp(xxxxs) sp(z) sp(z);
    padding: sp(z);
    width: 32px;
    height: 32px;

    color: color(primary);
    border: sp(z);
    background: transparent;
    cursor: pointer;
    z-index: 1;

    &:focus,
    &:focus {
      outline: 1px solid color(primary);
    }
  }

  .calendar-nav-arrows-left {
    left: 15px;

    > svg {
      fill: #027fe6;
      left: calc(50% - 10px);
      position: relative;
    }
  }

  .calendar-nav-arrows-right {
    right: 15px;

    > svg {
      fill: #027fe6;
      right: calc(50% - 10px);
      position: relative;
    }
  }

  .calendar-nav-header {
    position: absolute;
    bottom: 12px;
    left: 16px;

    &-unit {
      width: 32px;
      margin-right: sp(xxxs);

      @include text(body);
      color: color(text-primary);
      font-weight: normal;

      text-align: center;
      display: inline-block;
    }
  }

  .calendar-nav-header-years {
    position: absolute;
    bottom: 12px;
    left: 24px;
    @include text(body);
    color: color(text-primary);
  }
}

.#{$sm-dp}-calendar-day-view {
  display: inline-block;
  position: relative;
  padding: sp(s) sp(xs) sp(s) sp(xs);

  &[hidden] {
    display: none;
  }

  .calendar-day-view-weeks {
    display: block;
  }

  .calendar-day-view-days {
    width: 32px;
    overflow: visible;

    &.last-of-week {
      margin: sp(z);
    }

    @include text(body);
    margin-right: sp(xxs);
    padding: sp(xs) sp(xxs);
    font-weight: 500;

    color: color(primary);
    background-color: transparent;
    border: sp(z);
    outline: none;

    text-align: center;
    display: inline-block;
    position: relative;
    cursor: pointer;

    &.notInMonth {
      visibility: hidden;
    }

    &.date-selected,
    &:hover,
    &:active {
      outline: none;
      color: color(text);
    }

    &.today::before {
      width: 4px;
      height: 4px;
      bottom: 4px;
      left: calc(50% - 2px);
      background-color: color(primary);
      border-radius: 50%;
      position: absolute;
      display: block;
      content: "";
      z-index: -1;
    }

    &.inRange {
      color: color(primary);
    }

    &.fromDate,
    &.toDate {
      color: color(text);
    }

    &.date-selected::before {
      width: 32px;
      height: 32px;
      top: calc(50% - 16px);
      left: 0;

      background: color(primary);
      border-radius: 50%;

      position: absolute;
      display: block;
      content: "";
      z-index: -1;
    }

    &:hover::before {
      width: 32px;
      height: 32px;
      top: calc(50% - 16px);
      left: 0px;

      background: color(primary-hover);
      border-radius: 50%;

      position: absolute;
      display: block;
      content: "";
      z-index: -1;
    }

    &:active::before {
      width: 32px;
      height: 32px;
      top: calc(50% - 16px);
      left: 0;

      background: color(primary);
      border-radius: 50%;

      position: absolute;
      display: block;
      content: "";
      z-index: -1;
    }

    &.disabled-focused::before {
      display: none;
    }

    & .fromDate::before {
      width: 32px;
      height: 32px;
      top: calc(50% - 16px);
      left: 8px;
      border-radius: 0;
      border: bw(none);

      background: color(primary);

      position: absolute;
      display: block;
      content: "";
      z-index: -3;
    }

    & .toDate::before {
      width: 32px;
      height: 32px;
      top: calc(50% - 16px);
      left: -8px;
      border-radius: 0;
      border: bw(none);

      background: color(primary);

      position: absolute;
      display: block;
      content: "";
      z-index: -3;
    }

    &:focus::after {
      width: 40px;
      height: 40px;
      top: calc(50% - 20px);
      left: calc(50% - 20px);

      border: border-style(focus-outline);
      border-color: color(primary);
      border-radius: 50%;
      background: color(background);

      position: absolute;
      display: block;
      content: "";
      z-index: -2;
    }

    &.disabled-focused:focus::after {
      width: 40px;
      height: 40px;
      top: calc(50% - 20px);
      left: calc(50% - 20px);

      border: border-style(focus-outline);
      border-color: color(text-disabled);

      position: absolute;
      display: block;
      content: "";
      z-index: -1;
    }

    &.inRange::before,
    & .inRange::before {
      background: color(primary);
      width: 40px;
      height: 32px;
      top: calc(50% - 16px);
      left: -4px;
      position: absolute;
      display: block;
      content: "";
      z-index: -3;
    }

    &.fromDate::before,
    &.toDate::before {
      background: color(primary);
      width: 32px;
      height: 32px;
      top: calc(50% - 16px);
      left: 0px;

      border-radius: 50%;

      position: absolute;
      display: block;
      content: "";
      z-index: -1;
    }

    &.inRange:hover {
      color: color(background-light);
    }

    &.inRange:hover::before {
      border-radius: 0;
    }

    &.toDate.inRange:hover::before {
      border-radius: 50%;
    }

    &.inRange:hover::after,
    &.fromDate:hover::after,
    &.toDate:hover::after {
      width: 32px;
      height: 32px;
      top: calc(50% - 16px);
      left: 0px;

      background: color(primary-hover);
      border-radius: 50%;

      position: absolute;
      display: block;
      content: "";
      z-index: -1;
    }

    &.disabled-focused::before,
    &[disabled]::before,
    &[disabled]::after {
      display: none;
    }

    &.disabled-focused,
    &[disabled],
    &[disabled]:hover,
    &[disabled]:focus,
    &[disabled]:active {
      font-weight: font-weight(medium);
      color: color(text-disabled);
      cursor: not-allowed;
    }

    &[disabled].inRange:hover::after {
      background: none;
      border: 0;
    }
  }
}

.#{$sm-dp}-calendar-year-view {
  display: block;
  position: relative;

  &.opened {
    width: 100%;
    height: 272px;
    padding: sp(m);

    overflow-y: scroll;
  }

  & .calendar-year-view-years {
    @include text(body);
    color: color(primary);
    background-color: transparent;

    width: 88px;
    height: 40px;
    margin: sp(xxs) auto;
    border: sp(z);
    padding: sp(z);
    outline: none;

    text-align: center;
    display: block;

    position: relative;
    cursor: pointer;

    &[today]::before {
      width: 4px;
      height: 4px;
      bottom: 6px; //Ali override
      left: calc(50% - 2px);
      background-color: color(primary);
      border-radius: 50%;
      position: absolute;
      display: block;
      content: "";
      z-index: -1;
    }

    &[selectedDate] {
      color: color(text);
    }

    &:focus::after {
      width: 88px;
      height: 48px;
      top: calc(50% - 24px);
      left: calc(50% - 44px);

      border: border-style(focus-outline);
      border-color: color(primary);
      border-radius: 48px;

      position: absolute;
      display: block;
      content: "";
      z-index: -1;
    }

    &:active,
    &:hover {
      color: color(text);
    }

    &[selectedDate]:before {
      width: 80px;
      height: 40px;
      top: calc(50% - 20px);
      left: calc(50% - 40px);

      border-radius: 48px;
      background-color: color(primary);

      position: absolute;
      display: block;
      content: "";
      z-index: -1;
    }

    &:active::before,
    &:hover::before {
      width: 80px;
      height: 40px;
      top: calc(50% - 20px);
      left: calc(50% - 40px);

      border-radius: 48px;
      background-color: color(primary-hover);

      position: absolute;
      display: block;
      content: "";
      z-index: -1;
    }

    &:active::before {
      background-color: color(primary);
    }

    &[disabledFocus]:focus::after {
      border-color: color(text-disabled);
    }

    &[disabledfocus]:before,
    &[disabledFocus]:focus::before {
      display: none;
    }

    &[disabled]::before,
    &[disabled]::after {
      display: none;
    }

    &[disabled],
    &[disabledfocus],
    &[disabled]:hover,
    &[disabled]:focus,
    &[disabled]:active,
    &[disabledFocus]:focus {
      color: color(text-disabled);
      cursor: not-allowed;
      text-decoration: none;
    }
  }
}
